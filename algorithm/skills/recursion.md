---
description: 재귀에 대해 알아보고, 이를 활용하는 알고리즘 스킬을 살펴봅니다.
---

# Recursion

## 재귀란?

***

재귀는 함수 자기 자신을 재 호출하면서  문제를 해결하는 알고리즘 기법입니다.

### 재귀 사용 시 문제점

재귀는 자기 자신을 재 호출하는 구조를 가지고 있기 때문에 무한 호출이 발생할 수 있습니다. 이에 반드시 무한 호출을 막는 제어문이 필요합니다.

또한, 재귀에서 사용한 변수가 어느 스코프에 존재하는 지 여부를 정확히 알고 사용하는 것이 중요합니다. 만약 함수 전역에 사용하는 변수라면 해당 값은 재귀 진행에 따라 누적된 값을 할당받게 됩니다.

### 재귀 설계 원칙

재귀는 기본적으로 아래의 구성을 가지고 있습니다.

```cpp
void func() {
    // 2. base case
    // 1. recursive case
}
```

#### 1. recursive case

재귀적으로 다음 함수로 진행하는 방법을 기재한 부분입니다. 해당 부분에서 다음 층으로 진행하게 됩니다.

#### 2. base case

언제 재귀문을 종료할 것인지를 기재하는 부분입니다. 해당 조건에 기재된 제약 조건 및 함수 내 base case의 위치에 따라 재귀 함수의 동작은 달라지게 됩니다.

### 언제 사용할까?

재귀는 크게 아래의 경우에 사용하게 됩니다.

#### 1. 반복 중첩 시 횟수가 정해져 있지 않을 경우

횟수가 정해져 있지 않은 반복문의 경우 언제 끝날지 모르기 때문에 반복문의 사용이 어렵습니다. 이에 재귀문을 사용한다면 끝나는 시점을 몰라도 문제 해결이 가능합니다.

#### 2. DFS / BFS / Back tracking

재귀는 모든 알고리즘의 기본이 되는 스킬입니다. 이에 다양한 알고리즘에서 이를 사용하고 있습니다.



## 재귀의 구조 이해

***

재귀 함수를 설계할 때는 반드시 제일 처음 구조를 이해한 상태로 시작해야 합니다.

아래는 재귀 함수의 구조를 이해하는 절차입니다.

### Recursive / Base case 살펴보기

먼저 재귀적으로 다음 함수를 호출해야 하는 시점과 재귀문의 종료 시점에 대해 알아야 합니다.

보통의 경우 Base case 가 Recursive case 보다 앞서 기재됩니다.

### 노드와 간선을 기준으로 값 변화 확인하기

이후, 재귀 함수에서 다음 층으로 진행하는 시점(다음 함수의 호출 시점)을 기준으로 노드와 간선을 분리합니다.

{% hint style="info" %}
여기서 노드와 간선은 각 재귀문의 level을 보다 쉽게 이해하기 위해 사용하였습니다.
{% endhint %}

만약 함수가 아래와 같이 정의되어 있다고 가정하겠습니다.

```cpp
int cnt = 0;

void func(int level) {
    if(level == 5) return; // base case
    cout << cnt++;
    func(level + 1); // recursive case
}
```

위 상황에서 level + 1 이전까지의 코드는 level 번째 노드와 그 간선에서의 동작을 의미합니다.

level + 1 연산이 func(level + 1) 이 아닌 그 이전에 사용되었다면 해당 시점을 기준으로 다음 레벨로 진행되었다는 것을 의미합니다.

즉, 다음 레벨로의 진행 여부는 재귀 함수의 호출이 아닌 recursive case 의 시점이 되게 됩니다.

이러한 부분을 잘 살펴 base case의 limit 값을 두어야 정상적으로 동작되게 됩니다.

### 복귀 시점에서의 동작 확인하기

Recursive case 뒤에 기재된 내용은 level + 1 과 같은 recursive case 뒤에 사용되었지만 해당 레벨에서의 복귀 과정에 존재하는 로직이기에 level 과 동일한 시점을 의미합니다.

복귀 과정에서 이를 사용하는 로직이기에 어떻게 배치하느냐에 따라 로직이 달라지게 됩니다.

만약 recursive case 가 다음 함수 호출 이전에 발생한다면 복귀 과정에서 level은 level + 1 이 되게 됩니다.



## Summary

***

* 재귀는 반복적으로 일을 처리하는 기법입니다.
* 재귀 함수의 설계 원칙은 종료시점(base case)와 다음 레벨 진행(recursive case)에 따라 설계하는 것입니다.
* 재귀 함수 안에서 recursive case 이전까지는 level, 그 이후는 level + 1 에 해당하게 됩니다.
* 재귀 함수의 복귀 과정은 recursive case 이후라면 level + 1, 그 이전이라면  level 이 되게 됩니다.
